// DOM Box, v1.7.4
// by Riki Fridrich <riki@fczbkk.com> (http://fczbkk.com/)
// https://github.com/InlineManual/dom-box
(function(){var a,b,c,d,e={}.hasOwnProperty,f=function(a,b){function c(){this.constructor=a}for(var d in b)e.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};if(b=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;for(null==a&&(a=[]),i={},g=["left","top","view_left","view_top"],f=["right","bottom","view_right","view_bottom"],b=[].concat(g,f),d={},j=0,n=b.length;n>j;j++)for(e=b[j],d[e]=[],k=0,o=a.length;o>k;k++)c=a[k],d[e].push(c[e]);for(l=0,p=g.length;p>l;l++)h=g[l],i[h]=Math.min.apply(null,d[h]);for(m=0,q=f.length;q>m;m++)h=f[m],i[h]=Math.max.apply(null,d[h]);return i.width=i.right-i.left,i.height=i.bottom-i.top,i},c=function(a){return null!=a&&"object"==typeof a&&1===a.nodeType&&"object"==typeof a.style&&"object"==typeof a.ownerDocument},"undefined"==typeof Angle||null===Angle)throw new Error("DomBox requires AngleJS library to operate.");a={angle:new Angle,getBox:function(b){return"string"==typeof b?new this.CollectionBox(b):c(b)?new this.ElementBox(b):b instanceof a.Box?b:null},getDistance:function(c,d){var e,f;return c=a.getBox(c),d=a.getBox(d),e=b([c,d]),f={horizontal:e.width-(c.width+d.width),vertical:e.height-(c.height+d.height)},f.horizontal<0&&(f.horizontal=0),f.vertical<0&&(f.vertical=0),f},detectOverlap:function(c,d){var e,f;return c=a.getBox(c),d=a.getBox(d),e=b([c,d]),f={horizontal:e.width-(c.width+d.width),vertical:e.height-(c.height+d.height)},f.horizontal<0&&f.vertical<0},getPivotDistance:function(b,c){var d,e,f,g;return b=a.getBox(b),c=a.getBox(c),d=b.getPivot(),e=c.getPivot(),f=d.left-e.left,g=d.top-e.top,Math.sqrt(Math.pow(f,2)+Math.pow(g,2))},getPivotAngle:function(b,c){var d,e,f,g;return b=a.getBox(b),c=a.getBox(c),f=b.getPivot(),g=c.getPivot(),e=Math.atan2(g.top-f.top,g.left-f.left),d=a.angle.fromRad(e),a.angle.normalize(d)}},d="object"==typeof exports?exports:this,d.DomBox=a,a.Box=function(){function a(){var a,b,c,d;for(d=this._properties,b=0,c=d.length;c>b;b++)a=d[b],this[a]=0;this.padding=0,this.update()}return a.prototype._properties=["width","height","left","top","right","bottom","view_left","view_top","view_right","view_bottom"],a.prototype.update=function(){return this.pad(this.padding)},a.prototype.setPadding=function(a){return this.padding=a,this.update()},a.prototype.pad=function(a){return null==a&&(a=0),this.width+=2*a,this.height+=2*a,this.left-=a,this.top-=a,this.right+=a,this.bottom+=a,this.view_left-=a,this.view_top-=a,this.view_right+=a,this.view_bottom+=a},a.prototype.getPivot=function(){return{left:this.left+this.width/2,top:this.top+this.height/2}},a.prototype.moveTo=function(a,b){var c,d;return null==a&&(a=this.left),null==b&&(b=this.top),isNaN(a)||(c=this.left-a,this.left=a,this.right=this.left+this.width,this.view_left-=c,this.view_right-=c),isNaN(b)?void 0:(d=this.top-b,this.top=b,this.bottom=this.top+this.height,this.view_top-=d,this.view_bottom-=d)},a.prototype.moveBy=function(a,b){return null==a&&(a=0),null==b&&(b=0),isNaN(a)||(this.left=this.left+a,this.right=this.left+this.width,this.view_left=this.view_left+a,this.view_right=this.view_right+a),isNaN(b)?void 0:(this.top+=b,this.bottom=this.top+this.height,this.view_top+=b,this.view_bottom+=b)},a.prototype.resizeTo=function(a,b){return null==a&&(a=this.width),null==b&&(b=this.height),isNaN(a)||(this.width=0>a?0:a,this.right=this.left+this.width,this.view_right=this.view_left+this.width),isNaN(b)?void 0:(this.height=0>b?0:b,this.bottom=this.top+this.height,this.view_bottom=this.view_top+this.height)},a.prototype.setSize=function(a,b){return this.resizeTo(a,b)},a.prototype.resizeBy=function(a,b){return null==a&&(a=0),null==b&&(b=0),isNaN(a)||(this.width=this.width+a,this.width<0&&(this.width=0),this.right=this.left+this.width,this.view_right=this.view_left+this.width),isNaN(b)?void 0:(this.height=this.height+b,this.height<0&&(this.height=0),this.bottom=this.top+this.height,this.view_bottom=this.view_top+this.height)},a.prototype.setLeft=function(a){var b;return b=a-this.left,this.left=a,this.width=this.right-this.left,this.view_left+=b},a.prototype.setRight=function(a){var b;return b=a-this.right,this.right=a,this.width=this.right-this.left,this.view_right+=b},a.prototype.setTop=function(a){var b;return b=a-this.top,this.top=a,this.height=this.bottom-this.top,this.view_top+=b},a.prototype.setBottom=function(a){var b;return b=a-this.bottom,this.bottom=a,this.height=this.bottom-this.top,this.view_bottom+=b},a.prototype.toString=function(){var a,b,c,d,e;for(b={},e=this._properties,c=0,d=e.length;d>c;c++)a=e[c],b[a]=this[a];return JSON.stringify(b)},a}(),a.ElementBox=function(a){function b(a){this.element=a,b.__super__.constructor.call(this)}return f(b,a),b.prototype.update=function(){var a,c,d,e;return c=this.getDocumentPosition(this.element),a=this.element.getBoundingClientRect(),this.width=null!=(d=a.width)?d:this.element.offsetWidth,this.height=null!=(e=a.height)?e:this.element.offsetHeight,this.left=c.left,this.top=c.top,this.right=c.left+this.width,this.bottom=c.top+this.height,this.view_left=a.left,this.view_top=a.top,this.view_right=a.right,this.view_bottom=a.bottom,b.__super__.update.call(this)},b.prototype.getDocumentPosition=function(a){var b,c,d;for(c={left:0,top:0},d=null!=a?a.parentNode:void 0;null!=d&&d!==document.body;)c.left-=d.scrollLeft,c.top-=d.scrollTop,d=d.parentNode;for(b=a;null!=b;)c.left+=b.offsetLeft,c.top+=b.offsetTop,b=b.offsetParent;return c},b}(a.Box),a.CollectionBox=function(c){function d(a){this.selector=a,d.__super__.constructor.call(this)}return f(d,c),d.prototype.update=function(){var c,e,f,g,h,i,j,k;if(c=[],this.selector)for(j=document.querySelectorAll(this.selector),h=0,i=j.length;i>h;h++)e=j[h],c.push(new a.ElementBox(e));0===c.length&&c.push(new a.Box),k=b(c);for(f in k)g=k[f],this[f]=g;return d.__super__.update.call(this)},d}(a.Box),a.Document={getWidth:function(){var a,b;return Math.max(null!=(a=document.body)?a.scrollWidth:void 0,null!=(b=document.body)?b.offsetWidth:void 0,document.documentElement.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth,0)},getHeight:function(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight,0)},getSize:function(){return{width:a.Document.getWidth(),height:a.Document.getHeight()}}},a.Viewport={getWidth:function(){return window.innerWidth||document.documentElement.clientWidth||0},getHeight:function(){return window.innerHeight||document.documentElement.clientHeight||0},getSize:function(){return{width:a.Viewport.getWidth(),height:a.Viewport.getHeight()}},getLeft:function(){return(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0)},getTop:function(){return(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)},getPosition:function(){return{left:a.Viewport.getLeft(),top:a.Viewport.getTop()}},getBox:function(){var b,c;return b=a.Viewport.getPosition(),c=a.Viewport.getSize(),{width:c.width,height:c.height,left:b.left,top:b.top,right:b.left+c.width,bottom:b.top+c.height}},moveInside:function(b){var c,d;return b=a.getBox(b),d=a.Viewport.getBox(),c={left:null,top:null},b.right>d.right&&(c.left=d.right-b.width),b.bottom>d.bottom&&(c.top=d.bottom-b.height),b.left<d.left&&(c.left=d.left),b.top<d.top&&(c.top=d.top),b.moveTo(c.left,c.top)},contains:function(b){var c;return b=a.getBox(b),null==b?!1:(c=this.getBox(),c.left<=b.left&&c.top<=b.top&&c.right>=b.right&&c.bottom>=b.bottom)},partialyContains:function(b){var c,d,e,f,g,h,i;return b=a.getBox(b),null==b?!1:(i=this.getBox(),e=Math.max(b.left,i.left),f=Math.max(b.top,i.top),h=Math.min(b.right,i.right),g=Math.min(b.bottom,i.bottom),d=h-e,c=g-f,d>0&&c>0)},canContain:function(b){return b=a.getBox(b),null==b?!1:b.width<=this.getWidth()&&b.height<=this.getHeight()},canCoexist:function(c,d){var e;return c=a.getBox(c),d=a.getBox(d),null==c||null==d?!1:(e=b([c,d]),e.width<=this.getWidth()&&e.height<=this.getHeight())},canFitAround:function(b,c){var d,e;return b=a.getBox(b),c=a.getBox(c),null==b||null==c?!1:(e=a.Viewport.getBox(),c.width>e.width||c.height>e.height?!1:(d=a.Viewport.getGaps(b),c.width<=d.horizontal.before||c.width<=d.horizontal.after||c.height<=d.vertical.before||c.height<=d.vertical.after))},fitAround:function(b,c){var d;if(b=a.getBox(b),c=a.getBox(c),a.Viewport.canFitAround(b,c)){if(d=a.Viewport.getGaps(b),a.Viewport.moveInside(c),!a.detectOverlap(b,c))return;if(c.width<=d.horizontal.before&&c.moveTo(b.left-c.width,null),!a.detectOverlap(b,c))return;if(c.height<=d.vertical.before&&c.moveTo(null,b.top-c.height),!a.detectOverlap(b,c))return;if(c.width<=d.horizontal.after&&c.moveTo(b.right,null),!a.detectOverlap(b,c))return;if(c.height<=d.vertical.after)return c.moveTo(null,b.bottom)}},getGaps:function(b){var c;return b=a.getBox(b),c=a.Viewport.getBox(),{horizontal:{before:Math.max(0,b.left-c.left),after:Math.max(0,c.right-b.right)},vertical:{before:Math.max(0,b.top-c.top),after:Math.max(0,c.bottom-b.bottom)}}},toString:function(){return JSON.stringify(a.Viewport.getBox())}}}).call(this);