// DOM Box, v1.10.0
// by Riki Fridrich <riki@fczbkk.com> (http://fczbkk.com/)
// https://github.com/InlineManual/dom-box
(function(){var a,b,c;b=function(a,b){return a.currentStyle?a.currentStyle[b]:window.getComputedStyle?document.defaultView.getComputedStyle(a,null).getPropertyValue(b):null},a=function(a){var c,d;return c="none"!==b(a,"display"),d="hidden"!==b(a,"visibility"),c&&d},c=function(b){var c;if(!(null!=(c=document.body)?c.contains(b):void 0))return!1;for(;null!=b&&b!==document.body;){if(!a(b))return!1;b=b.parentNode}return!0},c.all=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],!this(b))return!1;return!0},c.any=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],this(b))return!0;return!1},"undefined"!=typeof expose&&null!==expose?expose(c,"isVisible"):window.isVisible=c}).call(this),function(){var a,b;a=function(){function a(a){null==a&&(a={}),this.setOptions(a)}return a.prototype.default_options={directions_start:0,directions:"right topRight top topLeft left bottomLeft bottom bottomRight".split(" ")},a.prototype.setOptions=function(a){var b,c,d;null==a&&(a={}),this.options={},d=this.default_options;for(b in d)c=d[b],this.options[b]=a[b]||this.default_options[b];return this.options},a.prototype.fromRad=function(a){return a*(180/Math.PI)},a.prototype.toRad=function(a){return a*(Math.PI/180)},a.prototype.normalize=function(a){var b;return null==a&&(a=0),b=isNaN(a)?0:a,b%=360,0>b&&(b+=360),b},a.prototype.toDirection=function(a){var b;return a=this.normalize(a),a-=this.options.directions_start,a=this.normalize(a),b=Math.round(a/(360/this.options.directions.length)),this.options.directions[b]||this.options.directions[0]},a.prototype.fromDirection=function(a){var b,c,d,e,f,g,h;for(e=-1,h=this.options.directions,d=f=0,g=h.length;g>f;d=++f)c=h[d],c===a&&(e=d);return-1===e?null:(b=e*(360/this.options.directions.length),b=this.options.directions_start+b)},a}(),"undefined"!=typeof expose&&null!==expose?expose(a,"Angle"):(b="object"==typeof exports?exports:this,b.Angle=a)}.call(this),function(){var a,b,c,d,e,f,g,h,i,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};for(c=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;for(null==a&&(a=[]),i={},g=["left","top","view_left","view_top"],f=["right","bottom","view_right","view_bottom"],b=[].concat(g,f),d={},j=0,n=b.length;n>j;j++)for(e=b[j],d[e]=[],k=0,o=a.length;o>k;k++)c=a[k],d[e].push(c[e]);for(l=0,p=g.length;p>l;l++)h=g[l],i[h]=Math.min.apply(null,d[h]);for(m=0,q=f.length;q>m;m++)h=f[m],i[h]=Math.max.apply(null,d[h]);return i.width=i.right-i.left,i.height=i.bottom-i.top,i},d=function(a){return null!=a&&"object"==typeof a&&1===a.nodeType&&"object"==typeof a.style&&"object"==typeof a.ownerDocument},b={isVisible:isVisible,Angle:Angle},f=h=0,i=b.length;i>h;f=++h)if(e=b[f],null==f)throw new Error("DomBox requires "+e+" library to operate.");a={angle:new Angle,getBox:function(b){return"string"==typeof b?new this.CollectionBox(b):d(b)?new this.ElementBox(b):b instanceof a.Box?b:null},getDistance:function(b,d){var e,f;return b=a.getBox(b),d=a.getBox(d),e=c([b,d]),f={horizontal:e.width-(b.width+d.width),vertical:e.height-(b.height+d.height)},f.horizontal<0&&(f.horizontal=0),f.vertical<0&&(f.vertical=0),f},detectOverlap:function(b,d){var e,f;return b=a.getBox(b),d=a.getBox(d),e=c([b,d]),f={horizontal:e.width-(b.width+d.width),vertical:e.height-(b.height+d.height)},f.horizontal<0&&f.vertical<0},getPivotDistance:function(b,c){var d,e,f,g;return b=a.getBox(b),c=a.getBox(c),d=b.getPivot(),e=c.getPivot(),f=d.left-e.left,g=d.top-e.top,Math.sqrt(Math.pow(f,2)+Math.pow(g,2))},getPivotAngle:function(b,c){var d,e,f,g;return b=a.getBox(b),c=a.getBox(c),f=b.getPivot(),g=c.getPivot(),e=Math.atan2(g.top-f.top,g.left-f.left),d=a.angle.fromRad(e),a.angle.normalize(d)}},g="object"==typeof exports?exports:this,g.DomBox=a,a.Box=function(){function a(){var a,b,c,d;for(d=this._properties,b=0,c=d.length;c>b;b++)a=d[b],this[a]=0;this.padding=0,this.update()}return a.prototype._properties=["width","height","left","top","right","bottom","view_left","view_top","view_right","view_bottom"],a.prototype.update=function(){return this.pad(this.padding)},a.prototype.setPadding=function(a){return this.padding=a,this.update()},a.prototype.pad=function(a){return null==a&&(a=0),this.width+=2*a,this.height+=2*a,this.left-=a,this.top-=a,this.right+=a,this.bottom+=a,this.view_left-=a,this.view_top-=a,this.view_right+=a,this.view_bottom+=a},a.prototype.getPivot=function(){return{left:this.left+this.width/2,top:this.top+this.height/2}},a.prototype.moveTo=function(a,b){var c,d;return null==a&&(a=this.left),null==b&&(b=this.top),isNaN(a)||(c=this.left-a,this.left=a,this.right=this.left+this.width,this.view_left-=c,this.view_right-=c),isNaN(b)?void 0:(d=this.top-b,this.top=b,this.bottom=this.top+this.height,this.view_top-=d,this.view_bottom-=d)},a.prototype.moveBy=function(a,b){return null==a&&(a=0),null==b&&(b=0),isNaN(a)||(this.left=this.left+a,this.right=this.left+this.width,this.view_left=this.view_left+a,this.view_right=this.view_right+a),isNaN(b)?void 0:(this.top+=b,this.bottom=this.top+this.height,this.view_top+=b,this.view_bottom+=b)},a.prototype.resizeTo=function(a,b){return null==a&&(a=this.width),null==b&&(b=this.height),isNaN(a)||(this.width=0>a?0:a,this.right=this.left+this.width,this.view_right=this.view_left+this.width),isNaN(b)?void 0:(this.height=0>b?0:b,this.bottom=this.top+this.height,this.view_bottom=this.view_top+this.height)},a.prototype.setSize=function(a,b){return this.resizeTo(a,b)},a.prototype.resizeBy=function(a,b){return null==a&&(a=0),null==b&&(b=0),isNaN(a)||(this.width=this.width+a,this.width<0&&(this.width=0),this.right=this.left+this.width,this.view_right=this.view_left+this.width),isNaN(b)?void 0:(this.height=this.height+b,this.height<0&&(this.height=0),this.bottom=this.top+this.height,this.view_bottom=this.view_top+this.height)},a.prototype.setLeft=function(a){var b;return b=a-this.left,this.left=a,this.width=this.right-this.left,this.view_left+=b},a.prototype.setRight=function(a){var b;return b=a-this.right,this.right=a,this.width=this.right-this.left,this.view_right+=b},a.prototype.setTop=function(a){var b;return b=a-this.top,this.top=a,this.height=this.bottom-this.top,this.view_top+=b},a.prototype.setBottom=function(a){var b;return b=a-this.bottom,this.bottom=a,this.height=this.bottom-this.top,this.view_bottom+=b},a.prototype.toString=function(){var a,b,c,d,e;for(b={},e=this._properties,c=0,d=e.length;d>c;c++)a=e[c],b[a]=this[a];return JSON.stringify(b)},a}(),a.ElementBox=function(b){function c(a){this.element=a,c.__super__.constructor.call(this)}return k(c,b),c.prototype.update=function(){var b,d,e,f,g,h,i,j;if(document.body.contains(this.element))b=this.element.getBoundingClientRect(),f=a.Viewport.getPosition(),this.width=null!=(i=b.width)?i:this.element.offsetWidth,this.height=null!=(j=b.height)?j:this.element.offsetHeight,this.view_left=b.left,this.view_top=b.top,this.view_right=b.right,this.view_bottom=b.bottom,this.left=b.left+f.left,this.top=b.top+f.top,this.right=this.left+this.width,this.bottom=this.top+this.height;else for(d=["width","height","left","top","right","bottom","view_left","view_top","view_right","view_bottom"],g=0,h=d.length;h>g;g++)e=d[g],this[e]=0;return c.__super__.update.call(this)},c.prototype.getCssProperty=function(a,b){var c;return null!=window.getComputedStyle?(c=window.getComputedStyle(a,null),c.getPropertyValue(b)):null!=a.currentStyle?(b=b.replace(/-(.)/g,function(a,b){return b.toUpperCase()}),a.currentStyle[b]):null},c}(a.Box),a.CollectionBox=function(b){function d(a){this.selector=a,d.__super__.constructor.call(this)}return k(d,b),d.prototype.update=function(){var b,e,f,g,h,i,j,k;if(b=[],this.selector)for(j=document.querySelectorAll(this.selector),h=0,i=j.length;i>h;h++)e=j[h],isVisible(e)&&b.push(new a.ElementBox(e));0===b.length&&b.push(new a.Box),k=c(b);for(f in k)g=k[f],this[f]=g;return d.__super__.update.call(this)},d}(a.Box),a.Document={getWidth:function(){var a,b;return Math.max(null!=(a=document.body)?a.scrollWidth:void 0,null!=(b=document.body)?b.offsetWidth:void 0,document.documentElement.clientWidth,document.documentElement.scrollWidth,document.documentElement.offsetWidth,0)},getHeight:function(){return Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight,0)},getSize:function(){return{width:a.Document.getWidth(),height:a.Document.getHeight()}}},a.Viewport={getWidth:function(){return window.innerWidth||document.documentElement.clientWidth||0},getHeight:function(){return window.innerHeight||document.documentElement.clientHeight||0},getSize:function(){return{width:a.Viewport.getWidth(),height:a.Viewport.getHeight()}},getLeft:function(){return(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0)},getTop:function(){return(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)},getPosition:function(){return{left:a.Viewport.getLeft(),top:a.Viewport.getTop()}},getBox:function(){var b,c;return b=a.Viewport.getPosition(),c=a.Viewport.getSize(),{width:c.width,height:c.height,left:b.left,top:b.top,right:b.left+c.width,bottom:b.top+c.height}},moveInside:function(b){var c,d;return b=a.getBox(b),d=a.Viewport.getBox(),c={left:null,top:null},b.right>d.right&&(c.left=d.right-b.width),b.bottom>d.bottom&&(c.top=d.bottom-b.height),b.left<d.left&&(c.left=d.left),b.top<d.top&&(c.top=d.top),b.moveTo(c.left,c.top)},contains:function(b){var c;return b=a.getBox(b),null==b?!1:(c=this.getBox(),c.left<=b.left&&c.top<=b.top&&c.right>=b.right&&c.bottom>=b.bottom)},partialyContains:function(b){var c,d,e,f,g,h,i;return b=a.getBox(b),null==b?!1:(i=this.getBox(),e=Math.max(b.left,i.left),f=Math.max(b.top,i.top),h=Math.min(b.right,i.right),g=Math.min(b.bottom,i.bottom),d=h-e,c=g-f,d>0&&c>0)},canContain:function(b){return b=a.getBox(b),null==b?!1:b.width<=this.getWidth()&&b.height<=this.getHeight()},canCoexist:function(b,d){var e;return b=a.getBox(b),d=a.getBox(d),null==b||null==d?!1:(e=c([b,d]),e.width<=this.getWidth()&&e.height<=this.getHeight())},canFitAround:function(b,c){var d,e;return b=a.getBox(b),c=a.getBox(c),null==b||null==c?!1:(e=a.Viewport.getBox(),c.width>e.width||c.height>e.height?!1:(d=a.Viewport.getGaps(b),c.width<=d.horizontal.before||c.width<=d.horizontal.after||c.height<=d.vertical.before||c.height<=d.vertical.after))},fitAround:function(b,c){var d;if(b=a.getBox(b),c=a.getBox(c),a.Viewport.canFitAround(b,c)){if(d=a.Viewport.getGaps(b),a.Viewport.moveInside(c),!a.detectOverlap(b,c))return;if(c.width<=d.horizontal.before&&c.moveTo(b.left-c.width,null),!a.detectOverlap(b,c))return;if(c.height<=d.vertical.before&&c.moveTo(null,b.top-c.height),!a.detectOverlap(b,c))return;if(c.width<=d.horizontal.after&&c.moveTo(b.right,null),!a.detectOverlap(b,c))return;if(c.height<=d.vertical.after)return c.moveTo(null,b.bottom)}},getGaps:function(b){var c;return b=a.getBox(b),c=a.Viewport.getBox(),{horizontal:{before:Math.max(0,b.left-c.left),after:Math.max(0,c.right-b.right)},vertical:{before:Math.max(0,b.top-c.top),after:Math.max(0,c.bottom-b.bottom)}}},toString:function(){return JSON.stringify(a.Viewport.getBox())}}}.call(this);